{"ast":null,"code":"import _objectSpread from\"/home/yogesh/listtsk/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/yogesh/listtsk/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/yogesh/listtsk/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/yogesh/listtsk/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/yogesh/listtsk/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/yogesh/listtsk/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/yogesh/listtsk/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{storeProducts,detailProduct}from'./data';import axios from\"axios\";import jwt_decode from'jwt-decode';var CourseContext=React.createContext();var CourseProvider=/*#__PURE__*/function(_Component){_inherits(CourseProvider,_Component);function CourseProvider(props){var _this;_classCallCheck(this,CourseProvider);_this=_possibleConstructorReturn(this,_getPrototypeOf(CourseProvider).call(this,props));_this.getItem=function(id){var product=_this.state.products.find(function(item){return item.id===id;});return product;};_this.checkout=function(){var token=jwt_decode(localStorage.usertoken);var id=token.id;axios.post('http://localhost:8080/addtocart/'+id,{cart:_this.state.cart,total:_this.state.cartTotal}).then(function(response){console.log('Course Added: ');console.log(response);if(response.status===200){_this.clearCart();}}).catch(function(error){console.log('Errror: ');console.log(error);});};_this.handleDetail=function(id){var product=_this.getItem(id);_this.setState(function(){return{detailProduct:product};});};_this.addtoCart=function(id){var tempProducts=_toConsumableArray(_this.state.products);var index=tempProducts.indexOf(_this.getItem(id));var product=tempProducts[index];product.inCart=true;product.count=1;var price=product.price;product.total=price;_this.setState(function(){return{products:_toConsumableArray(tempProducts),cart:[].concat(_toConsumableArray(_this.state.cart),[product]),detailProduct:_objectSpread({},product)};},_this.addTotals);};_this.openModal=function(id){var product=_this.getItem(id);_this.setState(function(){return{modalProduct:product,modalOpen:true};});};_this.closeModal=function(){_this.setState(function(){return{modalOpen:false};});};_this.setProducts=function(){var tempProducts=[];storeProducts.forEach(function(item){var singleItem=_objectSpread({},item);tempProducts=[].concat(_toConsumableArray(tempProducts),[singleItem]);});_this.setState(function(){return{products:tempProducts};});};_this.getTotals=function(){var subTotal=0;_this.state.cart.map(function(item){return subTotal+=item.total;});var tempTax=subTotal*0.1;var tax=parseFloat(tempTax.toFixed(2));var total=subTotal+tax;return{subTotal:subTotal,tax:tax,total:total};};_this.addTotals=function(){var totals=_this.getTotals();_this.setState(function(){return{cartSubTotal:totals.subTotal,cartTax:totals.tax,cartTotal:totals.total};});};_this.removeItem=function(id){var tempProducts=_toConsumableArray(_this.state.products);var tempCart=_toConsumableArray(_this.state.cart);var index=tempProducts.indexOf(_this.getItem(id));var removedProduct=tempProducts[index];removedProduct.inCart=false;removedProduct.count=0;removedProduct.total=0;tempCart=tempCart.filter(function(item){return item.id!==id;});_this.setState(function(){return{cart:_toConsumableArray(tempCart),products:_toConsumableArray(tempProducts)};},_this.addTotals);};_this.clearCart=function(){_this.setState(function(){return{cart:[]};},function(){_this.setProducts();_this.addTotals();});};_this.state={products:[],cart:[],detailProduct:detailProduct,modalOpen:false,modalProduct:detailProduct,cartSubTotal:0,cartTax:0,cartTotal:0};return _this;}_createClass(CourseProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.setProducts();}},{key:\"render\",value:function render(){return React.createElement(CourseContext.Provider,{value:_objectSpread({},this.state,{handleDetail:this.handleDetail,addtoCart:this.addtoCart,openModal:this.openModal,closeModal:this.closeModal,removeItem:this.removeItem,clearCart:this.clearCart,checkout:this.checkout})},this.props.children);}}]);return CourseProvider;}(Component);var CourseConsumer=CourseContext.Consumer;export{CourseProvider,CourseConsumer};","map":{"version":3,"sources":["/home/yogesh/listtsk/src/Context.js"],"names":["React","Component","storeProducts","detailProduct","axios","jwt_decode","CourseContext","createContext","CourseProvider","props","getItem","id","product","state","products","find","item","checkout","token","localStorage","usertoken","post","cart","total","cartTotal","then","response","console","log","status","clearCart","catch","error","handleDetail","setState","addtoCart","tempProducts","index","indexOf","inCart","count","price","addTotals","openModal","modalProduct","modalOpen","closeModal","setProducts","forEach","singleItem","getTotals","subTotal","map","tempTax","tax","parseFloat","toFixed","totals","cartSubTotal","cartTax","removeItem","tempCart","removedProduct","filter","children","CourseConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {storeProducts, detailProduct} from './data'\nimport axios from \"axios\";\nimport jwt_decode from 'jwt-decode'\n\n\n\nconst CourseContext = React.createContext();\n\n\n\nclass CourseProvider extends Component {\n    constructor(props) {\n        super(props)\n    \n        this.state = {\n             products:[],\n             cart:[],\n             detailProduct: detailProduct,\n             modalOpen:false,\n             modalProduct:detailProduct,\n             cartSubTotal: 0,\n             cartTax: 0,\n             cartTotal: 0\n        }\n    }\n\n\n\n    getItem = (id) =>{\n        const product = this.state.products.find(item => item.id === id)\n        return product;\n    }\n\n    checkout = () => {\n        let token = jwt_decode(localStorage.usertoken);\n        let id = token.id\n        axios\n            .post('http://localhost:8080/addtocart/'+id, {\n                cart: this.state.cart,\n                total: this.state.cartTotal\n            })\n            .then(response => {\n                console.log('Course Added: ')\n                console.log(response)\n                \n                if (response.status === 200) {\n                    this.clearCart();\n                }\n            }).catch(error => {\n                console.log('Errror: ')\n                console.log(error);\n                \n            })\n    }\n\n    handleDetail = (id) =>{\n        const product = this.getItem(id);\n        this.setState(\n            ()=>{\n                return {detailProduct: product}\n            }\n        )\n    }\n\n    addtoCart = id => {\n        let tempProducts = [...this.state.products];\n        const index = tempProducts.indexOf(this.getItem(id));\n        const product = tempProducts[index];\n        product.inCart = true;\n        product.count = 1;\n        const price = product.price;\n        product.total = price;\n    \n        this.setState(() => {\n          return {\n            products: [...tempProducts],\n            cart: [...this.state.cart, product],\n            detailProduct: { ...product }\n          };\n        }, this.addTotals);\n      };\n\n    openModal = id =>{\n        const product = this.getItem(id);\n        this.setState(() => {\n            return {modalProduct:product, modalOpen:true}\n        })\n    }\n\n    closeModal = () =>{\n        this.setState(() => {\n            return{modalOpen: false}\n        })\n    }\n\n    componentDidMount(){\n        this.setProducts();\n    }\n\n    setProducts = () => {\n        let tempProducts = [];\n        storeProducts.forEach(item => {\n            const singleItem = {...item};\n            tempProducts = [...tempProducts, singleItem];\n        });\n\n        this.setState(() => {\n            return {products: tempProducts};\n        });\n    };\n\n    getTotals = () => {\n        let subTotal = 0;\n        this.state.cart.map(item => (subTotal += item.total));\n        const tempTax = subTotal * 0.1;\n        const tax = parseFloat(tempTax.toFixed(2));\n        const total = subTotal + tax;\n        return {\n          subTotal,\n          tax,\n          total\n        };\n      };\n      addTotals = () => {\n        const totals = this.getTotals();\n        this.setState(\n          () => {\n            return {\n              cartSubTotal: totals.subTotal,\n              cartTax: totals.tax,\n              cartTotal: totals.total\n            };\n          }\n        );\n      };\n      removeItem = id => {\n        let tempProducts = [...this.state.products];\n        let tempCart = [...this.state.cart];\n    \n        const index = tempProducts.indexOf(this.getItem(id));\n        let removedProduct = tempProducts[index];\n        removedProduct.inCart = false;\n        removedProduct.count = 0;\n        removedProduct.total = 0;\n    \n        tempCart = tempCart.filter(item => {\n          return item.id !== id;\n        });\n    \n        this.setState(() => {\n          return {\n            cart: [...tempCart],\n            products: [...tempProducts]\n          };\n        }, this.addTotals);\n      };\n\n      clearCart = () => {\n        this.setState(\n          () => {\n            return { cart: [] };\n          },\n          () => {\n            this.setProducts();\n            this.addTotals();\n          }\n        );\n      };\n    \n    render() {\n        return (\n            <CourseContext.Provider value={{\n                ...this.state,\n                handleDetail:this.handleDetail,\n                addtoCart:this.addtoCart,\n                openModal: this.openModal,\n                closeModal:this.closeModal,\n                removeItem:this.removeItem,\n                clearCart: this.clearCart,\n                checkout:this.checkout\n            }}>\n                {this.props.children}\n            </CourseContext.Provider>\n        )\n    }\n}\n\n\nconst CourseConsumer = CourseContext.Consumer;\n\nexport {CourseProvider, CourseConsumer};\n"]},"metadata":{},"sourceType":"module"}